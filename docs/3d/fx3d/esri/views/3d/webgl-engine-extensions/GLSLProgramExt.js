/**
 * Copyright @ 2018 Esri.
 * All rights reserved under the copyright laws of the United States and applicable international laws, treaties, and conventions.
 */
define(["esri/core/libs/gl-matrix-2/gl-matrix"],function(t){var n=t.vec3f64,r=t.vec3,i=t.vec2f64,o=t.vec2,e=t.vec4f64,a=t.vec4,f=0;return function(t,u){var l,c,s,g=f++,h=function(){if(null==l){l=u.createProgram();for(var n=0;n<t.length;++n)u.attachShader(l,t[n].getGLName());m()}},m=function(){null!=l&&(u.linkProgram(l),u.getProgramParameter(l,35714)||console.error("Could not initialize shader\nVALIDATE_STATUS: "+u.getProgramParameter(l,35715)+", gl error ["+u.getError()+"] infoLog: "+u.getProgramInfoLog(l)),c={},s={})};this.dispose=function(){for(var n=0;n<t.length;++n){var r=t[n].getGLName();u.isShader(r)&&u.deleteShader(r)}u.isProgram(l)&&u.deleteProgram(l)},this.getId=function(){return g},this.getShader=function(n){return t["vertex"===n?0:1]},this.use=function(){h(),u.useProgram(l)},this.getLocation=function(t){return h(),null==c[t]&&(c[t]=u.getUniformLocation(l,t)),c[t]},this.hasUniform=function(t){return null!=this.getLocation(t)},this.getAttribLocation=function(t){return h(),null==s[t]&&(s[t]=u.getAttribLocation(l,t)),s[t]};var v={};this.uniform1i=function(t,n){var r=v[t];null!=r&&n===r||(u.uniform1i(this.getLocation(t,u),n),v[t]=n)},this.uniform1f=function(t,n){var r=v[t];null!=r&&n===r||(u.uniform1f(this.getLocation(t,u),n),v[t]=n)};var L={};this.uniform2f=function(t,n,r){var e=L[t];null!=e&&n===e[0]&&r===e[1]||(u.uniform2f(this.getLocation(t,u),n,r),null==e?L[t]=i.fromValues(n,r):o.set(e,n,r))},this.uniform2fv=function(t,n){var r=L[t];(n.length>2||null==r||n[0]!==r[0]||n[1]!==r[1])&&(u.uniform2fv(this.getLocation(t,u),n),null==r?L[t]=i.create(n):o.copy(r,n))};var d={};this.uniform3f=function(t,i,o,e){var a=d[t];null!=a&&i===a[0]&&o===a[1]&&e===a[2]||(u.uniform3f(this.getLocation(t,u),i,o,e),null==a?d[t]=n.fromValues(i,o,e):r.set(a,i,o,e))},this.uniform3fv=function(t,i){var o=d[t];(i.length>3||null==o||i[0]!==o[0]||i[1]!==o[1]||i[2]!==o[2])&&(u.uniform3fv(this.getLocation(t,u),i),null==o?d[t]=n.create(i):r.copy(o,i))};var P={};this.uniform4f=function(t,n,r,i,o){var f=P[t];null!=f&&n===f[0]&&r===f[1]&&i===f[2]&&o===f[3]||(u.uniform4f(this.getLocation(t,u),n,r,i,o),null==f?P[t]=e.fromValues(n,r,i,o):a.set(f,n,r,i,o))},this.uniform4fv=function(t,n){var r=P[t];(n.length>4||null==r||n[0]!==r[0]||n[1]!==r[1]||n[2]!==r[2]||n[3]!==r[3])&&(u.uniform4fv(this.getLocation(t,u),n),null==r?P[t]=e.create(n):a.copy(r,n))},this.uniformMatrix4fv=function(t,n){u.uniformMatrix4fv(this.getLocation(t,u),!1,n)},this.dispose=function(){if(null!=l){for(var n=0;n<t.length;++n){var r=t[n].getGLName();u.detachShader(l,r),u.deleteShader(r)}u.deleteProgram(l)}}}});